---
title: ä»€ä¹ˆæ˜¯ React çš„æ’æ§½ï¼ˆPortalsï¼‰ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ React æ’æ§½çš„åº”ç”¨åœºæ™¯
---

React çš„â€œæ’æ§½â€åœ¨ React ä¸­ç§°ä¸º **Portals**ï¼Œæ˜¯æŒ‡å°†ä¸€ä¸ªç»„ä»¶çš„å­èŠ‚ç‚¹æ¸²æŸ“åˆ° **DOM æ ‘çš„å¦ä¸€ä¸ªä½ç½®**ï¼Œè€Œä¸æ˜¯æŒ‰ç…§ç»„ä»¶å±‚çº§æ­£å¸¸æ¸²æŸ“ã€‚è¿™ç±»ä¼¼äºåŸç”Ÿ Web ä¸­çš„æ’æ§½æˆ–â€œä¼ é€é—¨â€ã€‚

---

## ğŸ”§ ä»€ä¹ˆæ˜¯ React Portalsï¼Ÿ

**å®˜æ–¹å®šä¹‰ï¼š**

> Portals æä¾›äº†ä¸€ç§å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°çˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹ä¸­çš„æ–¹å¼ã€‚

React æä¾›äº† `ReactDOM.createPortal(child, container)` APIï¼Œç”¨äºåˆ›å»º Portalã€‚

---

## ğŸ“¦ ç”¨æ³•ç¤ºä¾‹

```jsx
import ReactDOM from 'react-dom';

function Modal({ children }) {
  return ReactDOM.createPortal(
    <div className="modal">{children}</div>,
    document.getElementById('modal-root')  // ç›®æ ‡å®¹å™¨
  );
}

// App.js
function App() {
  return (
    <div>
      <h1>ä¸»é¡µé¢å†…å®¹</h1>
      <Modal>
        <p>æˆ‘æ˜¯æ¨¡æ€æ¡†ä¸­çš„å†…å®¹</p>
      </Modal>
    </div>
  );
}
```

å‡è®¾ HTML æ–‡ä»¶å¦‚ä¸‹ï¼š

```html
<body>
  <div id="root"></div>
  <div id="modal-root"></div>
</body>
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè™½ç„¶ `Modal` è¢«å†™åœ¨ `App` çš„ç»„ä»¶æ ‘ä¸­ï¼Œä½†å®ƒæœ€ç»ˆè¢«æŒ‚è½½åˆ°äº† `#modal-root` ä¸‹ã€‚

---

## ğŸ§  ä¸ºä»€ä¹ˆä½¿ç”¨ Portalsï¼Ÿ

### âœ… åº”ç”¨åœºæ™¯

1. ### âœ… æ¨¡æ€æ¡†ï¼ˆModalï¼‰

   æ¨¡æ€æ¡†éœ€è¦æµ®åœ¨é¡µé¢æœ€é¡¶å±‚ï¼Œä¸èƒ½è¢«çˆ¶å…ƒç´ çš„ `overflow: hidden`ã€`z-index` ç­‰å½±å“ã€‚

2. ### âœ… Tooltip / å¼¹å‡ºèœå•

   ä¾‹å¦‚ Popoverã€Dropdownã€Tooltip ç­‰ï¼Œé€šå¸¸è¦è„±ç¦»å½“å‰ç»„ä»¶å±‚çº§ï¼Œè·Ÿéšé¡µé¢æ»šåŠ¨æˆ–é”šç‚¹å®šä½ã€‚

3. ### âœ… æŠ½å±‰ï¼ˆDrawerï¼‰ã€é€šçŸ¥æ¡†ï¼ˆToastï¼‰

   è¿™äº›ç»„ä»¶å¾€å¾€éœ€è¦åœ¨é¡µé¢ä»»æ„ä½ç½®æ˜¾ç¤ºï¼Œä½†åˆä¸æƒ³åµŒå…¥åœ¨ä¸» DOM ç»“æ„é‡Œã€‚

4. ### âœ… ä¸è¢«ç¥–å…ˆ CSS é™åˆ¶çš„ DOM å…ƒç´ 

   é¿å…æŸäº›çˆ¶ç»„ä»¶ CSS æ ·å¼æ±¡æŸ“ï¼Œæ¯”å¦‚ `overflow`, `z-index`, `transform`ã€‚

---

## ğŸ§© Portals å’Œäº‹ä»¶ä¼ æ’­

å³ä½¿å­å…ƒç´ è¢«æ¸²æŸ“åˆ°äº† DOM æ ‘çš„å…¶ä»–ä½ç½®ï¼Œ**äº‹ä»¶ä»ç„¶åœ¨ React è™šæ‹Ÿ DOM æ ‘ä¸­ä¼ æ’­**ã€‚

```jsx
function App() {
  const handleClick = () => alert('clicked App');

  return (
    <div onClick={handleClick}>
      <Modal>
        <button>ç‚¹å‡»æˆ‘</button>
      </Modal>
    </div>
  );
}
```

ç‚¹å‡» Modal ä¸­çš„æŒ‰é’®æ—¶ï¼Œäº‹ä»¶ä»ç„¶ä¼šå†’æ³¡åˆ° `App` çš„ `div` ä¸Šï¼Œå¼¹å‡º alertã€‚

---

## ğŸš« æ³¨æ„äº‹é¡¹

* `createPortal()` çš„ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªå·²å­˜åœ¨äº DOM ä¸­çš„èŠ‚ç‚¹ã€‚
* åœ¨ä½¿ç”¨ SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰æ—¶è¦å°å¿ƒå¤„ç† `document.getElementById`ã€‚
* Portal çš„å†…å®¹ä¸ä¼šè‡ªåŠ¨è¢«æ— éšœç¢å·¥å…·ï¼ˆå¦‚å±å¹•é˜…è¯»å™¨ï¼‰è¯†åˆ«ä¸ºä¸» DOM çš„ä¸€éƒ¨åˆ†ï¼Œå¯èƒ½éœ€è¦é¢å¤–å¤„ç† ARIA å±æ€§ã€‚

---

## âœ… å°ç»“

| ç‰¹æ€§     | æè¿°                                        |
| ------ | ----------------------------------------- |
| è„±ç¦»æ¸²æŸ“ä½ç½® | æ¸²æŸ“å­ç»„ä»¶åˆ° DOM çš„å…¶ä»–ä½ç½®                          |
| äº‹ä»¶ä¾ç„¶å†’æ³¡ | äº‹ä»¶ä»ä¼šé€šè¿‡ React æ ‘ä¼ æ’­                          |
| å¸¸è§ç”¨é€”   | Modalã€Toastã€Tooltipã€Drawer                |
| ä½¿ç”¨æ–¹å¼   | `ReactDOM.createPortal(child, container)` |

éœ€è¦æ—¶ï¼Œå¯ä»¥å°è£…ä¸€ä¸ª Portal ç»„ä»¶æ¥ç®€åŒ–ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š

```jsx
const Portal = ({ children }) =>
  ReactDOM.createPortal(children, document.body);
```

---

å¦‚æœä½ æœ‰å…·ä½“éœ€æ±‚ï¼Œæ¯”å¦‚ç”¨ Portals å®ç°ä¸€ä¸ªå…¨å±€å¼¹çª—ç³»ç»Ÿï¼Œæˆ‘ä¹Ÿå¯ä»¥å¸®ä½ å†™ä¸€ä¸ªå®Œæ•´ä¾‹å­ã€‚éœ€è¦å—ï¼Ÿ
