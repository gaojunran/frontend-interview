---
title: React é¡¹ç›®ä¸­å¦‚ä½•è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Ÿå¯ä»¥ä½¿ç”¨å“ªäº›å·¥å…·ï¼Ÿ
---

åœ¨ React é¡¹ç›®ä¸­ï¼Œ**å•å…ƒæµ‹è¯•ï¼ˆUnit Testingï¼‰** æ˜¯ä¸€ç§éªŒè¯å•ä¸ªç»„ä»¶æˆ–å‡½æ•°æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œçš„æµ‹è¯•æ–¹å¼ã€‚React çš„ç»„ä»¶æœ¬è´¨ä¸Šæ˜¯å‡½æ•°ï¼ˆå‡½æ•°ç»„ä»¶æˆ–ç±»ç»„ä»¶ï¼‰ï¼Œå› æ­¤å¯ä»¥å¾ˆå¥½åœ°è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚

---

## âœ… ä¸ºä»€ä¹ˆè¦åœ¨ React ä¸­åšå•å…ƒæµ‹è¯•ï¼Ÿ

* ä¿è¯ç»„ä»¶åŠŸèƒ½æ­£ç¡®
* é˜²æ­¢å›å½’ bugï¼ˆä»£ç æ›´æ”¹åå¯¼è‡´åŸæœ¬æ­£å¸¸çš„åŠŸèƒ½å‡ºé”™ï¼‰
* æé«˜é‡æ„ä¿¡å¿ƒ
* æå‡ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§

---

## ğŸ› ï¸ å¸¸ç”¨çš„ React å•å…ƒæµ‹è¯•å·¥å…·

| å·¥å…·                             | ä½œç”¨                                              |
| ------------------------------ | ----------------------------------------------- |
| **Jest**                       | æµ‹è¯•è¿è¡Œå™¨ï¼ˆTest Runnerï¼‰ï¼ŒFacebook å¼€å‘ï¼Œé»˜è®¤ç”¨äºå¤§å¤šæ•° React é¡¹ç›® |
| **React Testing Libraryï¼ˆRTLï¼‰** | ç”¨äºæµ‹è¯• React ç»„ä»¶è¡Œä¸ºçš„å·¥å…·åº“ï¼Œå¼ºè°ƒâ€œä»ç”¨æˆ·è§’åº¦æµ‹è¯•â€                 |
| **Vitest**                     | ç±»ä¼¼ Jestï¼Œä½†ä¸º Vite ä¼˜åŒ–ï¼Œé€‚åˆ Vite é¡¹ç›®                   |
| **Enzyme**                     | ç”± Airbnb å¼€å‘ï¼Œæ›¾æµè¡Œäºæ—©æœŸç‰ˆæœ¬çš„ React æµ‹è¯•ï¼Œä½†ç°åœ¨å·²é€æ­¥è¢« RTL å–ä»£   |

---

## ğŸ”§ å¸¸è§å·¥å…·ä»‹ç»è¯¦è§£

### 1. **Jest**

* **ç”¨é€”**ï¼šæ‰§è¡Œæµ‹è¯•ã€æ–­è¨€ã€æ¨¡æ‹Ÿå‡½æ•°ç­‰
* **ç‰¹æ€§**ï¼š

  * é›¶é…ç½®æ”¯æŒ React
  * å†…ç½®æ–­è¨€åº“ï¼ˆexpectï¼‰
  * æ”¯æŒå¿«ç…§æµ‹è¯•ï¼ˆSnapshot Testingï¼‰
  * æ”¯æŒ Mockã€å®šæ—¶å™¨æ§åˆ¶ç­‰é«˜çº§åŠŸèƒ½

ğŸ“¦ å®‰è£…æ–¹å¼ï¼ˆCreate React App å·²å†…ç½®ï¼‰ï¼š

```bash
npm install --save-dev jest
```

ğŸ“„ ç¤ºä¾‹ï¼š

```js
// sum.js
export const sum = (a, b) => a + b;

// sum.test.js
import { sum } from './sum';

test('adds 1 + 2 to equal 3', () => {
  expect(sum(1, 2)).toBe(3);
});
```

---

### 2. **React Testing Libraryï¼ˆRTLï¼‰**

* **ç›®æ ‡**ï¼šä»ç”¨æˆ·è§’åº¦å‡ºå‘è¿›è¡Œç»„ä»¶è¡Œä¸ºæµ‹è¯•ï¼Œè€Œéç»„ä»¶å®ç°ç»†èŠ‚
* **æ ¸å¿ƒç†å¿µ**ï¼šæµ‹è¯•åº”è¯¥åƒç”¨æˆ·é‚£æ ·ä¸ç»„ä»¶äº¤äº’

ğŸ“¦ å®‰è£…ï¼š

```bash
npm install --save-dev @testing-library/react @testing-library/jest-dom
```

ğŸ“„ ç¤ºä¾‹ï¼š

```jsx
// Counter.jsx
export function Counter() {
  const [count, setCount] = React.useState(0);
  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={() => setCount((c) => c + 1)}>Increment</button>
    </div>
  );
}
```

```js
// Counter.test.js
import { render, screen, fireEvent } from '@testing-library/react';
import { Counter } from './Counter';

test('increments count on click', () => {
  render(<Counter />);
  fireEvent.click(screen.getByText('Increment'));
  expect(screen.getByText(/count:/i)).toHaveTextContent('Count: 1');
});
```

---

### 3. **Vitest**ï¼ˆé€‚ç”¨äº Viteï¼‰

* æ›´å¿«å¯åŠ¨é€Ÿåº¦
* ä¸ Vite é…åˆç´§å¯†
* API ä¸ Jest é«˜åº¦å…¼å®¹

ğŸ“¦ å®‰è£…ï¼š

```bash
npm install -D vitest @testing-library/react jsdom
```

ğŸ“„ é…ç½® `vite.config.js`ï¼š

```js
import { defineConfig } from 'vite';

export default defineConfig({
  test: {
    globals: true,
    environment: 'jsdom',
  },
});
```

---

### 4. **Enzymeï¼ˆäº†è§£å³å¯ï¼‰**

* **ä¼˜ç‚¹**ï¼šå…è®¸ shallowï¼ˆæµ…å±‚ï¼‰æ¸²æŸ“ï¼Œæµ‹è¯•å†…éƒ¨ç»“æ„
* **ç¼ºç‚¹**ï¼šè¿‡äºä¾èµ–ç»„ä»¶å®ç°ç»†èŠ‚ï¼Œä¸å†æ¨èç”¨äºç°ä»£ Reactï¼ˆReact 18 æ”¯æŒä¹Ÿè¾ƒå·®ï¼‰

---

## ğŸ§ª å•å…ƒæµ‹è¯• vs å…¶ä»–æµ‹è¯•ç±»å‹

| ç±»å‹             | ç›®æ ‡                 | å·¥å…·                  |
| -------------- | ------------------ | ------------------- |
| **å•å…ƒæµ‹è¯•**       | æµ‹è¯•ç»„ä»¶æˆ–å‡½æ•°çš„æœ€å°å•å…ƒ       | Jest + RTL / Enzyme |
| **é›†æˆæµ‹è¯•**       | å¤šä¸ªç»„ä»¶äº¤äº’çš„æ•´ä½“åŠŸèƒ½æµ‹è¯•      | RTL                 |
| **ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆE2Eï¼‰** | æµ‹è¯•æ•´ä¸ªé¡µé¢æˆ–æµç¨‹ï¼Œæ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸º | Cypress, Playwright |

---

## ğŸ“Œ å®è·µå»ºè®®

1. ä¼˜å…ˆä½¿ç”¨ **React Testing Library** + **Jest**
2. ç¼–å†™æµ‹è¯•æ—¶ï¼Œ**ä»ç”¨æˆ·è§’åº¦å‡ºå‘**ï¼Œè€Œéç»„ä»¶å†…éƒ¨é€»è¾‘
3. ä¿æŒæµ‹è¯•ç®€æ´ã€æ¸…æ™°ã€å¯ç»´æŠ¤
4. å¯¹å…³é”®é€»è¾‘å’ŒçŠ¶æ€å˜åŒ–è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œä¸è¦è¿½æ±‚ 100% è¦†ç›–ç‡
5. å¯é›†æˆ CI å·¥å…·ï¼ˆå¦‚ GitHub Actionsï¼‰è‡ªåŠ¨è·‘æµ‹è¯•

---

å¦‚æœä½ å¸Œæœ›æˆ‘ä¸¾ä¸€ä¸ªæ›´å¤æ‚çš„ç»„ä»¶ï¼ˆä¾‹å¦‚è¡¨å•ã€å¼‚æ­¥è¯·æ±‚ã€Redux çŠ¶æ€ï¼‰å•å…ƒæµ‹è¯•çš„ä¾‹å­ï¼Œä¹Ÿå¯ä»¥å‘Šè¯‰æˆ‘ï¼Œæˆ‘æ¥è¡¥å……ä»£ç ã€‚
