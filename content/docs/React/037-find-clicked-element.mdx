---
title: åœ¨ React ä¸­ï¼Œå¦‚ä½•åˆ¤æ–­ç‚¹å‡»çš„å…ƒç´ å±äºå“ªä¸ªç»„ä»¶ï¼Ÿ
---

åœ¨ React ä¸­åˆ¤æ–­ç‚¹å‡»çš„å…ƒç´ å±äºå“ªä¸ªç»„ä»¶ï¼Œæœ¬è´¨æ˜¯äº‹ä»¶å¤„ç†å’Œç»„ä»¶ç»“æ„çš„ç»“åˆä½¿ç”¨ã€‚è¿™é‡Œè¯¦ç»†è®²è®²å‡ ç§å¸¸è§çš„æ–¹æ³•ï¼Œå¸®åŠ©ä½ åˆ¤æ–­ç‚¹å‡»äº‹ä»¶æ¥è‡ªå“ªä¸ªç»„ä»¶ã€‚

---

## ğŸ”¹ åœºæ™¯èƒŒæ™¯

ä½ å¯èƒ½æƒ³åšå¦‚ä¸‹æ“ä½œï¼š

* åˆ¤æ–­ç‚¹å‡»çš„æ˜¯å“ªä¸ªè‡ªå®šä¹‰ç»„ä»¶
* æˆ–è€…ï¼šç‚¹å‡»çš„æ˜¯ç»„ä»¶å†…çš„å“ªä¸ªå…ƒç´ 
* æˆ–è€…ï¼šå¤šä¸ªç»„ä»¶å…±ç”¨ä¸€ä¸ªäº‹ä»¶æ—¶ï¼ŒåŒºåˆ†ç‚¹å‡»æº

---

## ğŸ§  åŸç†åŸºç¡€ï¼šäº‹ä»¶å†’æ³¡å’Œåˆæˆäº‹ä»¶ç³»ç»Ÿ

React çš„äº‹ä»¶å¤„ç†æ˜¯åŸºäºæµè§ˆå™¨çš„**äº‹ä»¶å†’æ³¡æœºåˆ¶**æ„å»ºçš„ï¼Œä½†å®ƒå°è£…äº†ä¸€å¥—**åˆæˆäº‹ä»¶ï¼ˆSyntheticEventï¼‰ç³»ç»Ÿ**ï¼Œå…¼å®¹æ‰€æœ‰æµè§ˆå™¨å¹¶æé«˜æ€§èƒ½ã€‚

---

## âœ… æ–¹æ³•ä¸€ï¼šåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ä½¿ç”¨ `event.target` å’Œ `event.currentTarget`

### ä¾‹å­ï¼š

```jsx
function MyComponent() {
  const handleClick = (event) => {
    console.log("è¢«ç‚¹å‡»çš„ DOM å…ƒç´ :", event.target);
    console.log("ç»‘å®šäº‹ä»¶çš„ DOM å…ƒç´ :", event.currentTarget);
  };

  return (
    <div onClick={handleClick}>
      <p>ç‚¹å‡»æˆ‘</p>
      <button>æŒ‰é’®</button>
    </div>
  );
}
```

### è¯´æ˜ï¼š

* `event.target`: å®é™…è§¦å‘ç‚¹å‡»çš„å…ƒç´ ï¼Œæ¯”å¦‚ `<button>`
* `event.currentTarget`: ç»‘å®š `onClick` çš„å…ƒç´ ï¼Œæ¯”å¦‚ `<div>`

å¯ä»¥æ®æ­¤åˆ¤æ–­ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨ç»„ä»¶è‡ªèº«çš„ DOM å†…éƒ¨ã€‚

---

## âœ… æ–¹æ³•äºŒï¼šä½¿ç”¨ React ref åˆ¤æ–­ç‚¹å‡»æº

å¦‚æœä½ æœ‰å¤šä¸ªç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡ `ref` åˆ¤æ–­äº‹ä»¶æ˜¯å¦å‘ç”Ÿåœ¨æŸä¸ªç»„ä»¶å†…éƒ¨ã€‚

### çˆ¶ç»„ä»¶åˆ¤æ–­å­ç»„ä»¶æ˜¯å¦è¢«ç‚¹å‡»ï¼š

```jsx
function ChildComponent(props) {
  return (
    <div ref={props.innerRef} className="child">
      <button>å­ç»„ä»¶æŒ‰é’®</button>
    </div>
  );
}

function Parent() {
  const childRef = useRef(null);

  const handleClick = (event) => {
    if (childRef.current && childRef.current.contains(event.target)) {
      console.log("ç‚¹å‡»å‘ç”Ÿåœ¨å­ç»„ä»¶å†…");
    } else {
      console.log("ç‚¹å‡»ä¸åœ¨å­ç»„ä»¶å†…");
    }
  };

  return (
    <div onClick={handleClick}>
      <ChildComponent innerRef={childRef} />
    </div>
  );
}
```

---

## âœ… æ–¹æ³•ä¸‰ï¼šä½¿ç”¨è‡ªå®šä¹‰å±æ€§æ ‡è¯†ç»„ä»¶èº«ä»½

æ¯ä¸ªç»„ä»¶æˆ–å…ƒç´ åŠ ä¸Šæ ‡è¯†å±æ€§ï¼Œåœ¨äº‹ä»¶ä¸­åˆ¤æ–­ã€‚

```jsx
function Item({ name, onClick }) {
  return (
    <div data-item-name={name} onClick={onClick}>
      {name}
    </div>
  );
}

function App() {
  const handleClick = (event) => {
    const name = event.target.getAttribute("data-item-name");
    console.log("ç‚¹å‡»çš„ç»„ä»¶åç§°:", name);
  };

  return (
    <>
      <Item name="A" onClick={handleClick} />
      <Item name="B" onClick={handleClick} />
    </>
  );
}
```

---

## âœ… æ–¹æ³•å››ï¼šç»™ç»„ä»¶ä¼  `onClick` è®©å®ƒè‡ªå·±å¤„ç†å¹¶æºå¸¦èº«ä»½ä¿¡æ¯

### æ¨èç”¨äºç»„ä»¶å†…éƒ¨å°è£…è‰¯å¥½çš„æƒ…å†µï¼š

```jsx
function Card({ id, onCardClick }) {
  return <div onClick={() => onCardClick(id)}>æˆ‘æ˜¯å¡ç‰‡ {id}</div>;
}

function App() {
  const handleCardClick = (id) => {
    console.log("ç‚¹å‡»çš„å¡ç‰‡ç»„ä»¶ ID:", id);
  };

  return (
    <>
      <Card id="card1" onCardClick={handleCardClick} />
      <Card id="card2" onCardClick={handleCardClick} />
    </>
  );
}
```

---

## âœ… æ–¹æ³•äº”ï¼šä½¿ç”¨äº‹ä»¶å§”æ‰˜ +ç»„ä»¶ååˆ¤æ–­ï¼ˆä¸å¸¸ç”¨ï¼‰

å¯ä»¥ç»“åˆç»„ä»¶åŠ  className æˆ– data-typeï¼Œåœ¨é¡¶å±‚ç»„ä»¶ä¸­ç»Ÿä¸€å¤„ç†ï¼š

```jsx
<div onClick={handleClick}>
  <div className="component-A">A</div>
  <div className="component-B">B</div>
</div>
```

```js
function handleClick(e) {
  if (e.target.classList.contains("component-A")) {
    console.log("ç‚¹å‡»äº† A");
  }
}
```

---

## ğŸ”š å°ç»“

| æ–¹æ³•                             | ç‰¹ç‚¹            | é€‚ç”¨åœºæ™¯         |
| ------------------------------ | ------------- | ------------ |
| `event.target / currentTarget` | ç®€å•ç›´æ¥          | åŒºåˆ†ç‚¹å‡» DOM å±‚æ¬¡  |
| `ref.contains(event.target)`   | ç²¾å‡†åˆ¤æ–­ç»„ä»¶ DOM èŒƒå›´ | çˆ¶ç»„ä»¶åˆ¤æ–­å­ç»„ä»¶ç‚¹å‡»   |
| `data-* å±æ€§`                    | çµæ´»ï¼Œå¯æ‰©å±•        | åˆ—è¡¨é¡¹ã€åŒºåˆ†å¤šä¸ªç»„ä»¶   |
| ç»„ä»¶ä¼ å‚                           | å°è£…æ€§å¥½          | ä¸šåŠ¡ç»„ä»¶ä¸­æ¨è      |
| äº‹ä»¶å§”æ‰˜ + class                   | ç®€åŒ–ç»‘å®šï¼Œæ€§èƒ½å¥½      | DOM å¤šï¼Œäº‹ä»¶ç»Ÿä¸€å¤„ç† |

---

å¦‚éœ€åˆ¤æ–­ç‚¹å‡»æ˜¯å¦åœ¨**ç»„ä»¶å¤–éƒ¨**ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ `useEffect + document.addEventListener` å®ç°â€œç‚¹å‡»å¤–éƒ¨å…³é—­â€é€»è¾‘ã€‚

éœ€è¦å…·ä½“æ¡ˆä¾‹å¯ä»¥ç»§ç»­é—®ã€‚
