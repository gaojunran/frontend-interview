---
title: Cookie、Session、Token 之间有什么区别？
---

这三个都是在 web 应用中非常重要的用户身份认证和状态管理机制，虽然有联系，但作用和实现机制各不相同。下面详细讲讲它们的区别和联系：

---

## 1. Cookie

### 什么是 Cookie？

Cookie 是浏览器存储在客户端的一小段数据，由服务器通过 HTTP 响应头 `Set-Cookie` 发送给浏览器，浏览器会自动带上对应域名的 Cookie 发送到服务器。

### 作用

* 用于在客户端存储少量数据，比如会话 ID、用户偏好设置、追踪信息等。
* 实现客户端状态管理（HTTP 协议本身是无状态的）。

### 特点

* 存储在客户端浏览器，大小有限制（一般 4KB 左右）。
* 会自动随请求发送（除非设置了 `HttpOnly` 或跨域限制）。
* 可设置过期时间，Session Cookie（浏览器关闭失效）和 Persistent Cookie（持久化）。

### 用途

* 记录用户登录状态（通常是保存 Session ID 或 Token）。
* 跟踪用户行为、实现个性化等。

---

## 2. Session

### 什么是 Session？

Session 是服务器端的一种机制，用来存储某个用户的状态信息。每个用户都会对应一个唯一的 Session ID。

### 作用

* 服务器保存用户状态（如登录信息、购物车等）。
* 通过 Session ID 关联客户端和服务器端状态。

### 工作流程

* 用户首次访问服务器，服务器创建 Session，分配一个唯一的 Session ID。
* 服务器把 Session ID 通过 Cookie 返回给浏览器。
* 浏览器每次请求都带上这个 Session ID，服务器根据 ID 查找对应的 Session，识别用户身份。

### 特点

* Session 数据存储在服务器，安全性较高。
* 依赖 Cookie 存储 Session ID（也可以通过 URL 重写传递，但不常用）。
* 会占用服务器内存，用户多时性能影响较大。

---

## 3. Token

### 什么是 Token？

Token 是一种令牌，通常指的是基于 JSON Web Token（JWT）或其他格式的字符串，表示用户身份和权限信息。Token 可以由服务器生成，也可以自包含用户信息。

### 作用

* 无状态身份认证。
* 允许跨域、跨平台使用（例如移动端和前端共享）。

### 工作流程

* 用户登录后，服务器生成 Token 并返回给客户端。
* 客户端保存 Token（通常在 LocalStorage 或 Cookie）。
* 后续请求携带 Token（通常放在 HTTP Header 的 Authorization 字段）。
* 服务器验证 Token 的合法性，识别用户身份。

### 特点

* 无状态，服务器不保存用户状态。
* Token 通常自包含信息（如用户ID、过期时间、权限），服务器验证签名即可。
* 支持分布式，方便扩展。
* 存储位置灵活，但有 XSS 安全风险（如果存 LocalStorage）。

---

## 三者对比总结

| 特性/机制 | Cookie          | Session                       | Token                     |
| ----- | --------------- | ----------------------------- | ------------------------- |
| 存储位置  | 浏览器客户端          | 服务器端                          | 客户端（LocalStorage/Cookie等） |
| 状态管理  | 客户端存储，自动携带请求    | 服务器存储，依赖 Session ID           | 无状态，自包含信息                 |
| 传输方式  | 浏览器自动在请求中携带     | 通过 Cookie 或 URL 传递 Session ID | 请求头中携带（Authorization）     |
| 规模限制  | 4KB 左右          | 服务器内存限制                       | 通常较长，大小无明显限制              |
| 安全性   | 容易受 CSRF、XSS 影响 | 服务器控制，更安全                     | 依赖签名验证，易受 XSS 影响          |
| 适用场景  | 状态保持、追踪用户       | 传统 web 登录状态管理                 | 分布式身份认证、API 认证            |
| 扩展性   | 依赖浏览器，有限        | 扩展性受限，需共享 Session             | 易扩展，支持跨域、移动端              |

---

## 举个简单的使用场景说明

* **Cookie + Session（传统登录）**
  用户登录时，服务器生成 Session，存储用户状态；通过 Cookie 把 Session ID 发给浏览器，浏览器每次请求带上 Cookie，服务器通过 Session ID 查找用户数据。

* **Token（现代无状态认证）**
  用户登录时，服务器生成 JWT Token，发给客户端；客户端存储 Token，每次请求通过 Authorization 头携带 Token，服务器验证 Token，无需服务器存储状态。

---

## 总结

* **Cookie 是客户端存储的载体，可以保存 Session ID 或 Token。**
* **Session 是服务器端保存用户状态的机制，依赖 Cookie 传递 Session ID。**
* **Token 是一种无状态的认证凭证，可以完全不依赖服务器存储状态，适合分布式环境。**

