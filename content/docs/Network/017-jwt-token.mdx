---
title: JWT Token 能说说吗？
---

JWT（JSON Web Token）是一种用于在网络应用环境中安全地传输声明信息的 **令牌格式**，常用于**用户认证与授权**。它是基于 JSON 格式，经过加密（或签名）后传输的字符串。

---

## 一、JWT 的结构

一个 JWT Token 一般长这个样子：

```
xxxxx.yyyyy.zzzzz
```

它由 **三部分**组成（用 `.` 分隔）：

### 1. Header（头部）

指定签名算法和类型：

```json
{
  "alg": "HS256",  // 签名算法，如 HMAC SHA256 或 RSA
  "typ": "JWT"     // 类型：固定为 JWT
}
```

Base64Url 编码后构成第一部分。

---

### 2. Payload（载荷）

即「声明」（Claims），包含用户身份信息及其他元数据，比如：

```json
{
  "sub": "1234567890",   // 用户 ID
  "name": "John Doe",    // 用户名
  "admin": true,         // 自定义字段
  "iat": 1516239022,     // 签发时间（Issued At）
  "exp": 1516242622      // 过期时间（Expiration Time）
}
```

> 注意：**Payload 是可以被解码查看的**，不要在这里放敏感信息（如密码）。

Base64Url 编码后构成第二部分。

---

### 3. Signature（签名）

用于验证 Token 是否被篡改：

```
HMACSHA256(
  base64UrlEncode(header) + "." + base64UrlEncode(payload),
  secret
)
```

这部分用于防止篡改，但不能防止窥探（除非加密）。如果使用非对称算法（如 RS256），则使用私钥签名、公钥验证。

---

## 二、JWT 的工作流程

以用户登录为例：

### ✅ 登录时

1. 用户输入账号密码；
2. 后端验证成功后，生成一个 JWT（包含用户 ID、过期时间等信息）；
3. 把 JWT 返回给前端，前端可存在本地（如 `localStorage` / `cookie`）。

---

### ✅ 后续请求

前端每次请求都在 Header 中带上 Token（通常是）：

```
Authorization: Bearer xxxxx.yyyyy.zzzzz
```

后端解析 Token：

* 验证签名合法性
* 验证是否过期
* 获取用户信息

---

## 三、JWT 的优势

| 优势        | 说明                                 |
| --------- | ---------------------------------- |
| 无需服务器存储会话 | Token 自包含信息，服务端可无状态处理请求（适合微服务、分布式） |
| 跨语言跨平台    | JSON 格式，通用性强                       |
| 支持自定义载荷   | 可以存放任意用户信息                         |

---

## 四、JWT 的缺点与风险

| 问题       | 说明                                |
| -------- | --------------------------------- |
| **不可撤销** | 一旦签发，服务端无法主动「让 Token 失效」，只能等它过期   |
| **安全问题** | Payload 明文可见，不能包含敏感数据；签名密钥泄露后风险巨大 |
| **长度较长** | 比传统 session ID 更长，占用带宽            |

---

## 五、JWT 的最佳实践

1. **缩短有效期**，搭配 Refresh Token 实现长期登录；
2. **签名密钥必须保密**，定期更换；
3. **Payload 不放敏感信息**（如密码、银行卡号）；
4. **使用 HTTPS** 防止中间人攻击；
5. **服务端记录黑名单** 或 使用 Redis 存储「有效 Token 列表」，实现强制登出/撤销；
6. **防止重放攻击**：使用 `jti`（JWT ID）配合服务端去重；

---

## 六、JWT 与 Session 的区别

| 特点  | JWT                 | Session     |
| --- | ------------------- | ----------- |
| 状态  | 无状态                 | 有状态（需服务端存储） |
| 存储  | 客户端（如 localStorage） | 服务端         |
| 扩展性 | 好，支持分布式             | 差，需要集中存储    |
| 安全性 | 需注意泄露风险             | 服务端控制较好     |

