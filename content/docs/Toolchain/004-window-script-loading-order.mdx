---
title: 在 window 对象中，模块间依赖关系由文件加载顺序决定，这种模块组织方式有哪些缺点？
---

在浏览器环境（即 `window` 对象为全局作用域）中，如果使用**传统的脚本标签 `<script>` 加载 JavaScript 文件**来组织模块（即模块间依赖关系由**文件加载顺序**决定），这种方式被称为 **“全局模块”方式** 或 “脚本式模块化”。这种方式虽然简单，但存在诸多缺点：

---

## 一、依赖管理混乱

### ❌ 缺点：

* 模块之间通过全局变量通信，**没有显式的依赖关系**。
* 你只能通过**人为控制文件的加载顺序**来保证依赖正确加载，否则会出错。

### ✅ 举例：

```html
<!-- utils.js 先定义工具函数 -->
<script src="utils.js"></script>
<!-- main.js 使用 utils.js 中定义的函数 -->
<script src="main.js"></script>
```

如果你不小心把 `<script src="main.js">` 放在 `<script src="utils.js">` 前面，就会报错。

---

## 二、全局作用域污染严重

### ❌ 缺点：

* 所有模块共享 `window` 全局作用域，容易造成变量命名冲突。
* 不同文件可能不小心使用相同的变量名，**相互覆盖**。

### ✅ 举例：

```js
// a.js
var config = { mode: 'dev' };

// b.js
var config = { mode: 'prod' }; // 覆盖了 a.js 的 config
```

---

## 三、模块重用性差

### ❌ 缺点：

* 模块没有**导出机制**，不能明确哪些变量或函数是对外暴露的。
* 想在另一个项目中复用模块非常困难，通常需要复制粘贴，并处理依赖和冲突。

---

## 四、无法异步或按需加载

### ❌ 缺点：

* 所有脚本在 HTML 加载时同步执行，**不能按需加载**某些模块，影响性能。
* 难以实现大型项目的模块懒加载、动态加载等功能。

---

## 五、难以进行自动化构建与优化

### ❌ 缺点：

* 缺乏模块定义规范，工具如 Webpack、Vite、Rollup 等难以分析模块依赖。
* 代码难以自动拆分打包、按需加载、Tree Shaking（无用代码剔除）等优化。

---

## 六、维护成本高

### ❌ 缺点：

* 模块之间耦合严重，依赖关系隐式，阅读和调试难度大。
* 大型项目中可能存在多个模块相互依赖、加载顺序难以管理，**容易出错**。

---

## 总结：主要缺点归纳

| 缺点类别    | 描述                         |
| ------- | -------------------------- |
| 依赖关系不明确 | 依赖靠加载顺序，容易错乱               |
| 命名冲突严重  | 全部挂载在 `window` 上，变量污染全局作用域 |
| 无法模块复用  | 无导出机制，难以组合使用               |
| 无法按需加载  | 所有代码必须一次性加载                |
| 工具链支持差  | 无模块定义，构建工具难以分析、优化          |
| 维护困难    | 耦合高、调试难，项目一大就很容易变得混乱       |

---

## 现代替代方案

为了解决这些问题，现代 JavaScript 通常使用以下模块系统：

1. **ES Modules（ESM）**

   * `import` / `export`
   * 原生支持，模块作用域独立
2. **CommonJS**

   * `require` / `module.exports`（主要用于 Node.js）
3. **AMD / UMD**

   * 旧式模块系统，已逐渐淘汰

