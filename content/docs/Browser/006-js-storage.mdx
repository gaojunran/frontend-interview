---
title: Javascript本地存储的方式有哪些？区别及应用场景？
---

JavaScript 本地存储主要有以下几种方式，每种方式适用的场景和特性都不同：

---

## 一、`localStorage`

### 特点：

* **生命周期**：永久保存，除非手动删除。
* **存储大小**：大约 5MB（不同浏览器略有差异）。
* **作用域**：同源（协议 + 域名 + 端口）下共享。
* **存储类型**：只能存储字符串（需手动 `JSON.stringify`/`parse` 来存储对象）。

### API：

```js
localStorage.setItem("key", "value");
localStorage.getItem("key"); // => "value"
localStorage.removeItem("key");
localStorage.clear();
```

### 应用场景：

* 保存用户登录状态（不涉及隐私）
* 存储 UI 状态（比如主题模式、侧边栏展开状态）
* 表单临时保存内容

---

## 二、`sessionStorage`

### 特点：

* **生命周期**：仅在当前会话（浏览器窗口或标签页）中有效，关闭页面即清除。
* **存储大小**：约 5MB。
* **作用域**：同源、同标签页之间不共享。
* **存储类型**：只能存储字符串。

### API 同 `localStorage`

### 应用场景：

* 页面刷新保留数据
* 多页面表单步骤缓存（只在当前 session 中有效）
* 防止在多标签页中共享数据（如防止重复提交）

---

## 三、`cookie`

### 特点：

* **生命周期**：可以设置 `expires` 或 `max-age`，否则是会话级。
* **存储大小**：4KB 左右。
* **作用域**：支持跨页面（同域名），可以设置 `path`、`domain`。
* **与服务端交互**：**每次请求都会自动携带**到服务器（如果不设置为 `HttpOnly`）。

### 语法：

```js
document.cookie = "key=value; expires=...; path=/;";
```

### 应用场景：

* 存储需要发送到服务端的认证信息（如 `token`）
* 登录状态保持（服务端验证）
* 跨页面识别用户标识（如埋点）

---

## 四、`IndexedDB`

### 特点：

* **生命周期**：持久化存储。
* **存储大小**：几十 MB \~ GB 级别（受限于磁盘空间）。
* **作用域**：同源。
* **存储类型**：支持对象、二进制、大数据结构，支持事务。

### 使用较复杂（异步 API）：

```js
const request = indexedDB.open("myDB", 1);
```

### 应用场景：

* 离线应用（如 PWA）
* 本地缓存大量数据（如聊天记录、文章内容、图片缓存等）
* 浏览器数据库替代方案（结构化数据）

---

## 五、`WebSQL`（已废弃）

* 早期尝试将 SQL 数据库引入浏览器，但已被 W3C 废弃，不推荐使用。
* 被 `IndexedDB` 替代。

---

## 总结对比表：

| 方式               | 生命周期    | 大小限制  | 是否随请求发送 | 支持的数据类型 | 适用场景        |
| ---------------- | ------- | ----- | ------- | ------- | ----------- |
| `localStorage`   | 永久      | \~5MB | 否       | 字符串     | 缓存数据、用户偏好   |
| `sessionStorage` | 页面会话级   | \~5MB | 否       | 字符串     | 页面间临时数据     |
| `cookie`         | 自定义/会话级 | \~4KB | 是       | 字符串     | 登录信息、服务端交互  |
| `IndexedDB`      | 永久      | 数十MB+ | 否       | 任意结构化数据 | 离线缓存、大数据量存储 |

---

如你要根据场景做选择：

* **小数据+频繁访问，不涉及服务端：用 localStorage/sessionStorage**
* **登录状态或安全信息：建议用 cookie（配合 `HttpOnly` 和 HTTPS）**
* **复杂结构或大量数据：使用 IndexedDB**

