---
title: å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºåŸŸä¸­ï¼Ÿ
---

åœ¨ JavaScript ä¸­ï¼Œåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨**å¯è§†åŒºåŸŸ**ï¼ˆå³è§†å£ï¼‰å†…ï¼Œæœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨ DOM å…ƒç´ çš„ `getBoundingClientRect()` æ–¹æ³•ã€‚

---

### âœ… æ–¹æ³•ä¸€ï¼šä½¿ç”¨ `getBoundingClientRect()`

è¿™æ˜¯æœ€å¸¸è§ã€æœ€ç®€å•çš„æ–¹å¼ï¼š

```javascript
function isInViewport(el) {
  const rect = el.getBoundingClientRect();
  return (
    rect.top >= 0 &&
    rect.left >= 0 &&
    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
    rect.right <= (window.innerWidth || document.documentElement.clientWidth)
  );
}
```

#### ğŸ“Œ è§£é‡Šï¼š

* `getBoundingClientRect()` è¿”å›ä¸€ä¸ªå…ƒç´ çš„å¤§å°åŠå…¶ç›¸å¯¹äºè§†å£çš„ä½ç½®ã€‚
* `top` / `bottom` / `left` / `right` è¡¨ç¤ºå…ƒç´ çš„è¾¹ç•Œç›¸å¯¹äºè§†å£çš„ä½ç½®ã€‚
* `window.innerHeight` æ˜¯è§†å£çš„é«˜åº¦ã€‚

#### ğŸ‘€ æ³¨æ„ï¼š

ä¸Šé¢çš„åˆ¤æ–­æ˜¯â€œå…ƒç´ **å®Œå…¨åœ¨**å¯è§†åŒºåŸŸä¸­â€ã€‚å¦‚æœä½ å¸Œæœ›åˆ¤æ–­â€œ**éƒ¨åˆ†åœ¨**â€ä¹Ÿç®—åœ¨è§†å£å†…ï¼Œå¯ä»¥ç¨å¾®æ”¾å®½æ¡ä»¶ï¼š

```javascript
function isPartiallyInViewport(el) {
  const rect = el.getBoundingClientRect();
  return (
    rect.bottom >= 0 &&
    rect.top <= (window.innerHeight || document.documentElement.clientHeight) &&
    rect.right >= 0 &&
    rect.left <= (window.innerWidth || document.documentElement.clientWidth)
  );
}
```

---

### âœ… æ–¹æ³•äºŒï¼šä½¿ç”¨ `IntersectionObserver`ï¼ˆæ¨èç”¨äºæ‡’åŠ è½½ï¼‰

ç°ä»£æµè§ˆå™¨ä¸­å¯ä»¥ä½¿ç”¨ `IntersectionObserver`ï¼Œå®ƒå¯ä»¥ç›‘å¬å…ƒç´ è¿›å…¥æˆ–ç¦»å¼€å¯è§†åŒºåŸŸï¼š

```javascript
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      console.log('å…ƒç´ è¿›å…¥è§†å£');
    } else {
      console.log('å…ƒç´ ç¦»å¼€è§†å£');
    }
  });
});

observer.observe(document.querySelector('#your-element'));
```

---

### âœ… åº”ç”¨åœºæ™¯ï¼š

* å›¾ç‰‡æ‡’åŠ è½½
* æ— é™æ»šåŠ¨ï¼ˆä¸‹æ‹‰åŠ è½½ï¼‰
* å…ƒç´ åŠ¨ç”»è§¦å‘ï¼ˆæ»šåŠ¨åˆ°å¯è§†åŒºåŸŸæ—¶æ‰§è¡ŒåŠ¨ç”»ï¼‰
* æ•°æ®ä¸ŠæŠ¥ï¼ˆå¹¿å‘Šæ›å…‰ï¼‰

---

å¦‚éœ€æ›´ç²¾ç»†æ§åˆ¶ï¼ˆå¦‚å¯è§†æ¯”ä¾‹ï¼‰ï¼Œä½ å¯ä»¥ç”¨ `entry.intersectionRatio` è¿›è¡Œåˆ¤æ–­ã€‚

