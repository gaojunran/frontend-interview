---
title: ç®€è¿°ä¸‹ WebWorkerï¼Œå®ƒå¦‚ä½•è¿›è¡Œé€šä¿¡ï¼Ÿ
---

**Web Worker** æ˜¯ä¸€ç§åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ **åå°çº¿ç¨‹** çš„æœºåˆ¶ï¼Œå¯ä»¥åœ¨ä¸é˜»å¡ä¸»çº¿ç¨‹ï¼ˆUIçº¿ç¨‹ï¼‰çš„æƒ…å†µä¸‹æ‰§è¡Œ JavaScript è„šæœ¬ï¼Œä»è€Œæå‡æ€§èƒ½ï¼Œç‰¹åˆ«é€‚ç”¨äºï¼š

* å¤§é‡è®¡ç®—
* æ•°æ®å¤„ç†
* æ–‡ä»¶è¯»å†™
* ç½‘ç»œè¯·æ±‚ï¼ˆä¾‹å¦‚ fetchï¼‰

---

## âœ… ä¸€å¥è¯æ€»ç»“ï¼š

> **Web Worker å…è®¸ä½ åœ¨æµè§ˆå™¨ä¸­å¯åŠ¨åå°çº¿ç¨‹ï¼Œä¸ä¸»çº¿ç¨‹é€šè¿‡æ¶ˆæ¯æœºåˆ¶è¿›è¡Œé€šä¿¡ï¼Œä»è€Œé¿å…é˜»å¡ UIã€‚**

---

## ğŸ§  å·¥ä½œåŸç†ï¼š

1. ä¸»çº¿ç¨‹åˆ›å»ºä¸€ä¸ª Workerï¼š

   ```js
   const worker = new Worker('worker.js');
   ```

2. ä¸»çº¿ç¨‹å’Œ Worker ä¹‹é—´é€šè¿‡ **`postMessage()`** å‘é€æ¶ˆæ¯ï¼Œä½¿ç”¨ **`onmessage`** æ¥æ”¶æ¶ˆæ¯ï¼š

   ```js
   // ä¸»çº¿ç¨‹
   worker.postMessage({ type: 'start', payload: 123 });

   worker.onmessage = function(event) {
     console.log('æ”¶åˆ°æ¥è‡ªworkerçš„æ¶ˆæ¯ï¼š', event.data);
   };
   ```

   ```js
   // worker.js
   onmessage = function(event) {
     const data = event.data;
     // å¤„ç†ä»»åŠ¡...
     postMessage('å¤„ç†å®Œæˆï¼š' + data.payload);
   };
   ```

3. é€šä¿¡åº•å±‚æ˜¯ **äº‹ä»¶é©±åŠ¨çš„æ¶ˆæ¯é€šé“ï¼ˆMessageChannelï¼‰**ï¼Œæ•°æ®ä¼šè¢«ç»“æ„åŒ–å…‹éš†ï¼ˆstructured cloneï¼‰å¤åˆ¶ï¼Œä¸ä¼šå…±äº«å†…å­˜ï¼ˆé™¤éä½¿ç”¨ SharedArrayBufferï¼‰ã€‚

---

## ğŸ”„ é€šä¿¡æ–¹å¼

| ä¸»çº¿ç¨‹                    | Workerçº¿ç¨‹             |
| ---------------------- | -------------------- |
| `worker.postMessage()` | `onmessage` ç›‘å¬æ¶ˆæ¯     |
| `worker.onmessage`     | `postMessage()` å‘é€å›å» |

---

## ğŸ” ç‰¹æ€§æ€»ç»“ï¼š

* âœ… éé˜»å¡ UI
* âœ… å¯å¹¶è¡Œæ‰§è¡Œä»£ç 
* âœ… é€šä¿¡åŸºäºæ¶ˆæ¯ï¼ˆpostMessageï¼‰
* âŒ ä¸èƒ½è®¿é—® DOMï¼ˆå› ä¸ºä¸åœ¨ä¸»çº¿ç¨‹ï¼‰
* âŒ ä¸ä¸»çº¿ç¨‹ä¸åŒä½œç”¨åŸŸï¼Œéœ€æ˜¾å¼é€šä¿¡

