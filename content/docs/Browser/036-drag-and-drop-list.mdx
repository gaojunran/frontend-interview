---
title: å¦‚ä½•ä½¿ç”¨ JavaScript å®ç°ä¸€ä¸ªæ‹–æ‹½æ’åºåˆ—è¡¨ï¼Œå¹¶ä¿æŒæ’åºåçš„é¡ºåºï¼Ÿ
---

å®ç°ä¸€ä¸ª **æ‹–æ‹½æ’åºåˆ—è¡¨** çš„ JavaScript åŠŸèƒ½ï¼Œå¹¶èƒ½åœ¨æ‹–æ‹½å®Œæˆåä¿æŒå¹¶è®°å½•æ’åºç»“æœï¼Œé€šå¸¸çš„æ€è·¯åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š

---

## ğŸ§  ä¸€ã€è®¾è®¡æ€è·¯æ¦‚è§ˆ

1. **å‡†å¤‡æ•°æ®ç»“æ„**ï¼šä¸€ä¸ªæ•°ç»„è¡¨ç¤ºåˆ—è¡¨çš„åˆå§‹é¡ºåºã€‚
2. **æ¸²æŸ“åˆ—è¡¨**ï¼šå°†æ•°ç»„æ¸²æŸ“æˆå¯æ‹–åŠ¨çš„ HTML åˆ—è¡¨é¡¹ã€‚
3. **å®ç°æ‹–æ‹½åŠŸèƒ½**ï¼š

   * ä½¿ç”¨ HTML5 çš„åŸç”Ÿæ‹–æ‹½ APIï¼ˆ`dragstart`, `dragover`, `drop` ç­‰ï¼‰ï¼›
4. **å¤„ç†æ‹–æ‹½äº‹ä»¶**ï¼šäº¤æ¢ DOM èŠ‚ç‚¹ï¼Œå¹¶åŒæ­¥æ›´æ–°æ•°æ®ç»“æ„é¡ºåºã€‚
5. **ä¿æŒæ’åºç»“æœ**ï¼šå¯ç”¨å˜é‡è®°å½•å½“å‰é¡ºåºï¼Œæˆ–åºåˆ—åŒ–å­˜å…¥ `localStorage`ã€‚

---

## ğŸ§© äºŒã€å®ç°æ–¹å¼è¯¦è§£

### 1. HTML ç»“æ„

```html
<ul id="sortable-list">
  <!-- JavaScript åŠ¨æ€ç”Ÿæˆ -->
</ul>
```

---

### 2. JavaScript æ¸²æŸ“ & æ‹–æ‹½å®ç°

```js
const items = ['è‹¹æœ', 'é¦™è•‰', 'æ©™å­', 'è¥¿ç“œ']; // åŸå§‹é¡ºåº
const list = document.getElementById('sortable-list');

function renderList() {
  list.innerHTML = '';
  items.forEach((item, index) => {
    const li = document.createElement('li');
    li.textContent = item;
    li.setAttribute('draggable', true);
    li.dataset.index = index;
    li.classList.add('draggable-item');
    list.appendChild(li);
  });
  addDragEvents(); // ç»‘å®šæ‹–æ‹½äº‹ä»¶
}
```

---

### 3. æ‹–æ‹½äº‹ä»¶ç»‘å®š

```js
let draggedIndex = null;

function addDragEvents() {
  const listItems = document.querySelectorAll('.draggable-item');

  listItems.forEach(item => {
    item.addEventListener('dragstart', (e) => {
      draggedIndex = +e.target.dataset.index;
      e.dataTransfer.effectAllowed = 'move';
    });

    item.addEventListener('dragover', (e) => {
      e.preventDefault(); // å¿…é¡»é˜»æ­¢é»˜è®¤æ‰èƒ½è§¦å‘ drop
      e.dataTransfer.dropEffect = 'move';
    });

    item.addEventListener('drop', (e) => {
      e.preventDefault();
      const targetIndex = +e.target.dataset.index;

      if (draggedIndex === targetIndex) return;

      // äº¤æ¢æ•°ç»„å…ƒç´ é¡ºåº
      [items[draggedIndex], items[targetIndex]] = [items[targetIndex], items[draggedIndex]];
      renderList(); // é‡æ–°æ¸²æŸ“
    });
  });
}
```

---

### 4. å¯åŠ¨æ¸²æŸ“

```js
renderList();
```

---

### 5. å¯é€‰ï¼šä¿å­˜æ’åºç»“æœï¼ˆå¦‚ä½¿ç”¨ localStorageï¼‰

```js
// ä¿å­˜
localStorage.setItem('sortedList', JSON.stringify(items));

// è¯»å–
const saved = localStorage.getItem('sortedList');
if (saved) {
  items.splice(0, items.length, ...JSON.parse(saved));
  renderList();
}
```

---

## ğŸ¨ 6. ç®€å•çš„ CSSï¼ˆå¯é€‰ç¾åŒ–ï¼‰

```css
#sortable-list {
  list-style: none;
  padding: 0;
}

.draggable-item {
  padding: 10px;
  margin: 5px 0;
  background: #eee;
  border: 1px solid #ccc;
  cursor: move;
}
```

---

## âœ… æ•´ä½“ä¼˜ç‚¹

* **çº¯ JavaScript å®ç°**ï¼Œæ— éœ€ç¬¬ä¸‰æ–¹åº“ï¼›
* **é¡ºåºå¯æŒä¹…ä¿å­˜**ï¼›
* æ˜“æ‰©å±•æˆå¤šåˆ—æ‹–æ‹½ã€æ‹–å…¥åˆ é™¤ç­‰åŠŸèƒ½ã€‚

---

## ğŸ§© Bonusï¼šå¦‚æœä½ ç”¨çš„æ˜¯æ¡†æ¶

* Vue å¯ç”¨ `v-for` æ¸²æŸ“ + `@dragstart` ç­‰äº‹ä»¶ã€‚
* React å»ºè®®ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ `react-beautiful-dnd`ã€‚
* Vanilla JS é¡¹ç›®ä¸­ä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨ [SortableJS](https://sortablejs.github.io/Sortable/) ç®€åŒ–æ“ä½œã€‚


