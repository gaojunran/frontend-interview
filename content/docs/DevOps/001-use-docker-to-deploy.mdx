---
title: 	å¦‚ä½•ä½¿ç”¨ Docker éƒ¨ç½²å‰ç«¯é¡¹ç›®ï¼Ÿ
---

ä½¿ç”¨ Docker éƒ¨ç½²å‰ç«¯é¡¹ç›®å¯ä»¥è®©ä½ å°†å‰ç«¯åº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªè½»é‡ã€å¯ç§»æ¤ã€æ˜“äºéƒ¨ç½²çš„å®¹å™¨é•œåƒã€‚ä»¥ä¸‹æ˜¯å®Œæ•´è¯¦ç»†çš„æµç¨‹ï¼ŒåŒ…æ‹¬æ„å»ºã€Dockerfile ç¼–å†™ã€æ„å»ºé•œåƒã€è¿è¡Œå®¹å™¨ç­‰æ­¥éª¤ï¼Œé€‚ç”¨äº Vueã€Reactã€Nuxtã€Viteã€Next.js ç­‰ä¸»æµæ¡†æ¶ã€‚

---

## ğŸ”§ å‰æå‡†å¤‡

* å®‰è£…å¥½ Node.js å’Œ Docker ç¯å¢ƒ
* å‰ç«¯é¡¹ç›®ç»“æ„å·²å®Œæˆï¼ˆä¾‹å¦‚ï¼šVue / React åº”ç”¨ï¼‰
* é¡¹ç›®å·²èƒ½é€šè¿‡ `npm run build` æ‰“åŒ…å‡ºé™æ€èµ„æº

---

## âœ… éƒ¨ç½²æµç¨‹è¯¦è§£

### 1. å‰ç«¯é¡¹ç›®æ‰“åŒ…

æ‰“åŒ…ä½ çš„å‰ç«¯é¡¹ç›®ï¼ˆé€šå¸¸æ˜¯ Vueã€Reactã€Vite é¡¹ç›®ç­‰ï¼‰ï¼š

```bash
npm run build
```

> æ‰“åŒ…åä¸€èˆ¬ä¼šç”Ÿæˆä¸€ä¸ª `dist/` æˆ– `build/` ç›®å½•ï¼Œé‡Œé¢æ˜¯é™æ€èµ„æºï¼ˆHTML/CSS/JS/å›¾ç‰‡ï¼‰

---

### 2. ç¼–å†™ `Dockerfile`

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `Dockerfile` æ–‡ä»¶ï¼š

#### âœ… å¦‚æœæ˜¯é™æ€èµ„æºéƒ¨ç½²ï¼ˆæ¨èï¼‰

```
# ä½¿ç”¨å®˜æ–¹ Nginx é•œåƒä½œä¸ºåŸºç¡€é•œåƒ
FROM nginx:alpine

# åˆ é™¤é»˜è®¤ nginx é…ç½®
RUN rm -rf /usr/share/nginx/html/*

# æ‹·è´ä½ æ‰“åŒ…åçš„å‰ç«¯èµ„æºåˆ° nginx çš„é»˜è®¤é™æ€ç›®å½•
COPY dist/ /usr/share/nginx/html

# å¦‚æœä½ æœ‰è‡ªå®šä¹‰ nginx é…ç½®æ–‡ä»¶ï¼Œå¯æ›¿æ¢é»˜è®¤é…ç½®
# COPY nginx.conf /etc/nginx/conf.d/default.conf

# æš´éœ²ç«¯å£
EXPOSE 80

# å¯åŠ¨ nginx
CMD ["nginx", "-g", "daemon off;"]
```

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Reactï¼ˆ`create-react-app`ï¼‰ï¼Œå°† `dist/` æ¢æˆ `build/`

---

### 3. æ„å»º Docker é•œåƒ

åœ¨ `Dockerfile` æ‰€åœ¨ç›®å½•æ‰§è¡Œï¼š

```bash
docker build -t my-frontend-app .
```

---

### 4. å¯åŠ¨å®¹å™¨

```bash
docker run -d -p 8080:80 --name frontend-container my-frontend-app
```

è®¿é—® [http://localhost:8080](http://localhost:8080) å³å¯çœ‹åˆ°ä½ çš„å‰ç«¯é¡µé¢ã€‚

---

## ğŸ”„ è¿›é˜¶é€‰é¡¹ï¼ˆå¯é€‰ï¼‰

### âœ… è‡ªå®šä¹‰ Nginx é…ç½®

ä½ å¯ä»¥æä¾›ä¸€ä¸ªè‡ªå®šä¹‰çš„ `nginx.conf` æ–‡ä»¶æ¥å¤„ç† SPA è·¯ç”±ç­‰é—®é¢˜ï¼š

**nginx.conf ç¤ºä¾‹ï¼š**

```
server {
    listen 80;
    server_name localhost;

    root /usr/share/nginx/html;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }
}
```

ç„¶åå°†å®ƒæ·»åŠ åˆ° Dockerfile ä¸­ï¼š

```
COPY nginx.conf /etc/nginx/conf.d/default.conf
```

---

## ğŸ“¦ å¤šé˜¶æ®µæ„å»ºï¼ˆNode + Nginxï¼‰

å¦‚æœä½ ä¸æƒ³æ‰‹åŠ¨æ‰“åŒ…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Node åšç¬¬ä¸€é˜¶æ®µï¼š

```
# é˜¶æ®µä¸€ï¼šæ„å»ºå‰ç«¯é¡¹ç›®
FROM node:18 AS builder

WORKDIR /app
COPY . .
RUN npm install && npm run build

# é˜¶æ®µäºŒï¼šæ‹·è´æ„å»ºç»“æœåˆ° Nginx
FROM nginx:alpine

COPY --from=builder /app/dist /usr/share/nginx/html
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

è¿™æ ·ä½ å°±å¯ä»¥ç›´æ¥ç”¨æºç æ„å»ºé•œåƒï¼Œæ— éœ€æ‰‹åŠ¨ `npm run build`

---

## ğŸ” éªŒè¯éƒ¨ç½²æ˜¯å¦æˆåŠŸ

```bash
docker ps         # æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨
docker logs frontend-container  # æŸ¥çœ‹æ—¥å¿—
docker exec -it frontend-container sh  # è¿›å…¥å®¹å™¨è°ƒè¯•
```

---

## ğŸ’¡ è¡¥å……ï¼šé€‚ç”¨äºå“ªäº›åœºæ™¯ï¼Ÿ

* å°†å‰ç«¯åº”ç”¨éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼ˆå¦‚ ECSã€GCPã€AWSï¼‰
* æœ¬åœ°è°ƒè¯• / å†…ç½‘éƒ¨ç½²
* æ­é…åç«¯æœåŠ¡ï¼ˆå¦‚ nginx ä»£ç†ã€Node.js æ¥å£ï¼‰

---

å¦‚æœä½ æœ‰å…·ä½“æ¡†æ¶ï¼ˆä¾‹å¦‚ Nuxtã€Next.jsã€Vite SSRï¼‰ï¼Œéƒ¨ç½²æ–¹å¼ä¼šç•¥æœ‰ä¸åŒï¼Œæˆ‘å¯ä»¥ç»§ç»­å¸®ä½ ç»†åŒ–ã€‚æ˜¯å¦éœ€è¦ä¸ºæŸä¸ªå…·ä½“æ¡†æ¶å†™ä¸€ä¸ªç¤ºä¾‹ï¼Ÿ
