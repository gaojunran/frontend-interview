---
title: å¦‚ä½•åœ¨ Vue 3 ä¸­å®ç°ä¸€ä¸ªå¤æ‚çš„è¡¨å•éªŒè¯å’Œæäº¤é€»è¾‘ï¼Ÿ
---

åœ¨ Vue 3 ä¸­å®ç°ä¸€ä¸ªå¤æ‚çš„è¡¨å•éªŒè¯å’Œæäº¤é€»è¾‘ï¼Œå»ºè®®ä½¿ç”¨ç»„åˆå¼ API æ­é… **`<script setup>`**ã€**`ref`/`reactive`**ã€`watch`ã€ä»¥åŠç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ [VeeValidate](https://vee-validate.logaretm.com/v4/) æˆ– [Yup](https://github.com/jquense/yup)ï¼‰å®ç°æ¨¡å—åŒ–ã€çµæ´»ã€å¼ºå¥çš„è¡¨å•å¤„ç†æµç¨‹ã€‚

---

## ğŸš§ åœºæ™¯è®¾å®šï¼ˆå‡è®¾ï¼‰

ä»¥ä¸€ä¸ªæ³¨å†Œè¡¨å•ä¸ºä¾‹ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µå’Œé€»è¾‘ï¼š

* ç”¨æˆ·åï¼šå¿…å¡«ï¼Œ3-15 ä¸ªå­—ç¬¦
* é‚®ç®±ï¼šå¿…å¡«ï¼Œé‚®ç®±æ ¼å¼
* å¯†ç ï¼šå¿…å¡«ï¼Œ6-20 ä½
* ç¡®è®¤å¯†ç ï¼šå¿…é¡»ä¸å¯†ç ä¸€è‡´
* æäº¤å‰éœ€éªŒè¯æ‰€æœ‰å­—æ®µï¼Œå±•ç¤ºå¯¹åº”é”™è¯¯
* æäº¤è¿‡ç¨‹ä¸­æ˜¾ç¤º loadingï¼ŒæˆåŠŸ/å¤±è´¥åæç¤º

---

## âœ… æŠ€æœ¯é€‰å‹æ¨è

* è¡¨å•å“åº”å¼æ•°æ®ï¼š`reactive`
* è¡¨å•æ ¡éªŒï¼šæ‰‹å†™ or Yup/VeeValidate
* é”™è¯¯æç¤ºï¼šæ‰‹åŠ¨ç»‘å®š or æ’ä»¶è‡ªåŠ¨ç®¡ç†
* æäº¤é€»è¾‘ï¼šå°è£…ä¸º `async` å‡½æ•°å¤„ç†çŠ¶æ€

---

## ğŸ’¡ ç¤ºä¾‹ï¼šæ‰‹å†™éªŒè¯é€»è¾‘ï¼ˆæ— ç¬¬ä¸‰æ–¹åº“ï¼‰

### 1. åŸºç¡€ç»“æ„

```vue
<script setup>
import { reactive, ref } from 'vue'

const form = reactive({
  username: '',
  email: '',
  password: '',
  confirmPassword: '',
})

const errors = reactive({
  username: '',
  email: '',
  password: '',
  confirmPassword: '',
})

const loading = ref(false)
const successMessage = ref('')
</script>
```

---

### 2. éªŒè¯å‡½æ•°

```ts
function validateForm() {
  let valid = true

  // æ¸…ç©ºä¸Šæ¬¡é”™è¯¯
  Object.keys(errors).forEach(key => (errors[key] = ''))

  // ç”¨æˆ·å
  if (!form.username) {
    errors.username = 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'
    valid = false
  } else if (form.username.length < 3 || form.username.length > 15) {
    errors.username = 'ç”¨æˆ·åé•¿åº¦éœ€ä¸º 3~15 å­—ç¬¦'
    valid = false
  }

  // é‚®ç®±
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
  if (!form.email) {
    errors.email = 'é‚®ç®±ä¸èƒ½ä¸ºç©º'
    valid = false
  } else if (!emailRegex.test(form.email)) {
    errors.email = 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®'
    valid = false
  }

  // å¯†ç 
  if (!form.password) {
    errors.password = 'å¯†ç ä¸èƒ½ä¸ºç©º'
    valid = false
  } else if (form.password.length < 6) {
    errors.password = 'å¯†ç é•¿åº¦éœ€å¤§äº 6'
    valid = false
  }

  // ç¡®è®¤å¯†ç 
  if (form.confirmPassword !== form.password) {
    errors.confirmPassword = 'ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´'
    valid = false
  }

  return valid
}
```

---

### 3. æäº¤é€»è¾‘

```ts
async function handleSubmit() {
  if (!validateForm()) return

  loading.value = true
  successMessage.value = ''

  try {
    // æ¨¡æ‹Ÿæäº¤é€»è¾‘
    await new Promise(resolve => setTimeout(resolve, 1000))
    successMessage.value = 'æ³¨å†ŒæˆåŠŸï¼'
    // æ¸…ç©ºè¡¨å•
    Object.keys(form).forEach(key => (form[key] = ''))
  } catch (e) {
    alert('æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•')
  } finally {
    loading.value = false
  }
}
```

---

### 4. æ¨¡æ¿éƒ¨åˆ†ï¼ˆç¤ºæ„ï¼‰

```vue
<template>
  <form @submit.prevent="handleSubmit">
    <div>
      <label>ç”¨æˆ·å</label>
      <input v-model="form.username" />
      <span class="error">{{ errors.username }}</span>
    </div>

    <div>
      <label>é‚®ç®±</label>
      <input v-model="form.email" />
      <span class="error">{{ errors.email }}</span>
    </div>

    <div>
      <label>å¯†ç </label>
      <input type="password" v-model="form.password" />
      <span class="error">{{ errors.password }}</span>
    </div>

    <div>
      <label>ç¡®è®¤å¯†ç </label>
      <input type="password" v-model="form.confirmPassword" />
      <span class="error">{{ errors.confirmPassword }}</span>
    </div>

    <button type="submit" :disabled="loading">æäº¤</button>

    <p v-if="successMessage" style="color:green">{{ successMessage }}</p>
  </form>
</template>
```

---

## ğŸ”§ æ›´å¤æ‚çš„éªŒè¯é€»è¾‘å»ºè®®ä½¿ç”¨ VeeValidate + Yup

å¦‚æœè¡¨å•æ›´å¤æ‚ï¼ˆè”åŠ¨å­—æ®µã€å¼‚æ­¥æ ¡éªŒã€åŠ¨æ€å­—æ®µã€åµŒå¥—ç»“æ„ï¼‰ï¼Œå»ºè®®ä½¿ç”¨ï¼š

```bash
npm install vee-validate yup
```

**VeeValidate** ç»“åˆ `useForm`, `useField`, `yupResolver` æä¾›å®Œå–„ä½“éªŒï¼Œä»£ç æ›´ç»“æ„åŒ–ã€‚
å¯ä»¥éšæ—¶ä¸¾ä¾‹å¸®ä½ å†™ VeeValidate ç‰ˆæœ¬ã€‚

---

## âœï¸ å°æŠ€å·§ä¸å®è·µå»ºè®®

| åœºæ™¯    | å»ºè®®                                   |
| ----- | ------------------------------------ |
| å¤šè¡¨å•å­—æ®µ | ç”¨ `reactive(form)` ç®¡ç†å¯¹è±¡              |
| é”™è¯¯æç¤º  | `reactive(errors)` æˆ– `computed` æ§åˆ¶æ˜¾éš |
| è”åŠ¨æ ¡éªŒ  | ç”¨ `watch` ç›‘å¬å­—æ®µå˜åŒ–ï¼ˆå¦‚å¯†ç ä¸ç¡®è®¤å¯†ç ï¼‰           |
| çŠ¶æ€ç®¡ç†  | æäº¤ä¸­ç”¨ `loading` æ ‡è®°æŒ‰é’®çŠ¶æ€ï¼Œé˜²æ­¢é‡å¤æäº¤         |
| é€»è¾‘æ‹†åˆ†  | æŠŠéªŒè¯é€»è¾‘æŠ½å‡ºä¸ºç‹¬ç«‹ `validateRules.ts`        |

---

## âœ… æ€»ç»“

åœ¨ Vue 3 ä¸­å®ç°å¤æ‚è¡¨å•éªŒè¯å’Œæäº¤å¯ä»¥ï¼š

1. **ä½¿ç”¨ `reactive` ç®¡ç†è¡¨å•æ•°æ®å’Œé”™è¯¯ä¿¡æ¯**
2. **å°è£…æ ¡éªŒå‡½æ•°ï¼Œé›†ä¸­å¤„ç†æ‰€æœ‰å­—æ®µ**
3. **å°è£…æäº¤é€»è¾‘å¹¶å¤„ç† loading ä¸æˆåŠŸæç¤º**
4. **å¿…è¦æ—¶ç”¨ Yup/VeeValidate æ›¿ä»£æ‰‹å†™æ ¡éªŒï¼Œæå‡å¯é æ€§**

---

å¦‚æœä½ æƒ³çœ‹å…·ä½“ **VeeValidate + Yup çš„é«˜çº§å†™æ³•å®ä¾‹**ï¼Œå¯ä»¥å‘Šè¯‰æˆ‘ï¼Œæˆ‘å¯ä»¥å¸®ä½ å†™å‡ºå®é™…åœºæ™¯çš„å®Œæ•´ä»£ç ã€‚
