---
title: JavaScript æ·±æ‹·è´æµ…æ‹·è´çš„åŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°ä¸€ä¸ªæ·±æ‹·è´ï¼Ÿ
---

### ä¸€ã€æ·±æ‹·è´ä¸æµ…æ‹·è´çš„åŒºåˆ«ï¼š

#### 1. æµ…æ‹·è´ï¼ˆShallow Copyï¼‰ï¼š

* æ‹·è´çš„æ˜¯**å¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§**ã€‚
* å¦‚æœå±æ€§æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„æ˜¯å€¼ï¼›
* å¦‚æœå±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼ˆå¦‚å¯¹è±¡ã€æ•°ç»„ï¼‰ï¼Œæ‹·è´çš„æ˜¯**å¼•ç”¨åœ°å€**ï¼ŒåŸå¯¹è±¡æ”¹å˜ä¼šå½±å“æ‹·è´åçš„å¯¹è±¡ã€‚

**ä¾‹å­ï¼š**

```javascript
const obj1 = { a: 1, b: { c: 2 } };
const obj2 = Object.assign({}, obj1);

obj2.b.c = 100;
console.log(obj1.b.c); // è¾“å‡º 100ï¼ˆå—å½±å“ï¼‰
```

#### 2. æ·±æ‹·è´ï¼ˆDeep Copyï¼‰ï¼š

* æ‹·è´çš„æ˜¯å¯¹è±¡çš„**å®Œæ•´ç»“æ„å’Œæ‰€æœ‰å±‚çº§æ•°æ®**ã€‚
* å¯¹äºå¼•ç”¨ç±»å‹ï¼Œä¹Ÿä¼š**é€’å½’æ‹·è´å…¶å†…éƒ¨å¯¹è±¡**ï¼Œä¸¤ä¸ªå¯¹è±¡å®Œå…¨ç‹¬ç«‹ã€‚

**ä¾‹å­ï¼š**

```javascript
const obj1 = { a: 1, b: { c: 2 } };
const obj2 = JSON.parse(JSON.stringify(obj1));

obj2.b.c = 100;
console.log(obj1.b.c); // è¾“å‡º 2ï¼ˆæœªå—å½±å“ï¼‰
```

---

### äºŒã€å¦‚ä½•å®ç°ä¸€ä¸ªæ·±æ‹·è´ï¼Ÿ

#### âœ… æ–¹æ³•ä¸€ï¼š`JSON.parse(JSON.stringify(obj))`

* ğŸ“Œ ä¼˜ç‚¹ï¼šç®€å•å¿«æ·
* âš ï¸ ç¼ºç‚¹ï¼š

  * æ— æ³•å¤„ç†å‡½æ•°ã€`undefined`ã€`Symbol`
  * æ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨
  * æ—¥æœŸå¯¹è±¡ `Date` ä¼šè¢«è½¬æˆå­—ç¬¦ä¸²

---

#### âœ… æ–¹æ³•äºŒï¼šæ‰‹å†™é€’å½’ç‰ˆï¼ˆåŸºç¡€ç‰ˆï¼‰

```javascript
function deepClone(obj) {
  if (obj === null || typeof obj !== 'object') return obj;

  const copy = Array.isArray(obj) ? [] : {};
  for (let key in obj) {
    if (obj.hasOwnProperty(key)) {
      copy[key] = deepClone(obj[key]);
    }
  }
  return copy;
}
```

---

#### âœ… æ–¹æ³•ä¸‰ï¼šå®Œå–„ç‰ˆï¼ˆæ”¯æŒå¾ªç¯å¼•ç”¨ï¼‰

```javascript
function deepClone(obj, hash = new WeakMap()) {
  if (obj === null || typeof obj !== 'object') return obj;

  if (hash.has(obj)) return hash.get(obj);

  const copy = Array.isArray(obj) ? [] : {};
  hash.set(obj, copy);

  for (let key in obj) {
    if (obj.hasOwnProperty(key)) {
      copy[key] = deepClone(obj[key], hash);
    }
  }
  return copy;
}
```

---

### ä¸‰ã€æ€»ç»“ï¼š

| æ–¹å¼                                | æ˜¯å¦æ·±æ‹·è´  | ä¼˜ç‚¹   | ç¼ºç‚¹                |
| --------------------------------- | ------ | ---- | ----------------- |
| `Object.assign()` / å±•å¼€è¿ç®—ç¬¦ `{...}` | âŒï¼ˆæµ…æ‹·è´ï¼‰ | ç®€å•   | æ— æ³•å¤åˆ¶åµŒå¥—å¯¹è±¡          |
| `JSON.stringify/parse`            | âœ…ï¼ˆæœ‰é™çš„ï¼‰ | å¿«é€Ÿå®ç° | ä¸èƒ½å¤„ç†å‡½æ•°ã€Dateã€å¾ªç¯å¼•ç”¨ç­‰ |
| è‡ªå®šä¹‰é€’å½’å‡½æ•°                           | âœ…      | çµæ´»å¯æ§ | éœ€è¦å¤„ç†å¾ªç¯å¼•ç”¨ã€æ€§èƒ½é—®é¢˜     |

éœ€è¦æ›´å¼ºå¤§ã€ç¨³å®šçš„æ·±æ‹·è´å»ºè®®ä½¿ç”¨åº“ï¼š

* [`lodash.cloneDeep`](https://lodash.com/docs/#cloneDeep)

---

æ˜¯å¦éœ€è¦æˆ‘å¸®ä½ å°è£…ä¸€ä¸ªæ”¯æŒæ›´å¤šç±»å‹çš„æ·±æ‹·è´å‡½æ•°ï¼Ÿ
